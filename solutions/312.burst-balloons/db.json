{"java":"class Solution {\n    public int[][] rec;\n    public int[] val;\n\n    public int maxCoins(int[] nums) {\n        int n = nums.length;\n        val = new int[n + 2];\n        for (int i = 1; i <= n; i++) {\n            val[i] = nums[i - 1];\n        }\n        val[0] = val[n + 1] = 1;\n        rec = new int[n + 2][n + 2];\n        for (int i = 0; i <= n + 1; i++) {\n            Arrays.fill(rec[i], -1);\n        }\n        return solve(0, n + 1);\n    }\n\n    public int solve(int left, int right) {\n        if (left >= right - 1) {\n            return 0;\n        }\n        if (rec[left][right] != -1) {\n            return rec[left][right];\n        }\n        for (int i = left + 1; i < right; i++) {\n            int sum = val[left] * val[i] * val[right];\n            sum += solve(left, i) + solve(i, right);\n            rec[left][right] = Math.max(rec[left][right], sum);\n        }\n        return rec[left][right];\n    }\n}\n"}